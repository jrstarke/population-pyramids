(function(e){e("hasher",["signals"],function(e){var t=function(t){function w(e){if(!e)return"";var t=new RegExp("^\\"+u.prependHash+"|\\"+u.appendHash+"$","g");return e.replace(t,"")}function E(){var e=p.exec(u.getURL());return e&&e[1]?decodeURI(e[1]):""}function S(){return c?c.contentWindow.frameHash:null}function x(){c=r.createElement("iframe"),c.src="about:blank",c.style.display="none",r.body.appendChild(c)}function T(){if(c&&a!==S()){var e=c.contentWindow.document;e.open(),e.write("<html><head><title>"+r.title+'</title><script type="text/javascript">var frameHash="'+a+'";</script></head><body>&nbsp;</body></html>'),e.close()}}function N(e,t){e=decodeURI(e);if(a!==e){var n=a;a=e,y&&(t?c.contentWindow.frameHash=e:T()),u.changed.dispatch(w(e),w(n))}}function C(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function k(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function L(e){e=Array.prototype.slice.call(arguments);var t=e.join(u.separator);return t=t?u.prependHash+t.replace(v,"")+u.appendHash:t,m&&b&&(t=t.replace(/\?/,"%3F")),t}var n=25,r=t.document,i=t.location,s=t.history,o=e.Signal,u,a,f,l,c,h,p=/#(.*)$/,d=/(\?.*)|(\#.*)/,v=/^\#/,m=!1,g="onhashchange"in t,y=m&&!g,b=i.protocol==="file:";return y?h=function(){var e=E(),t=S();t!==a&&t!==e?u.setHash(w(t)):e!==a&&N(e)}:h=function(){var e=E();e!==a&&N(e)},u={VERSION:"1.1.0",appendHash:"",prependHash:"/",separator:"/",changed:new o,stopped:new o,initialized:new o,init:function(){if(l)return;a=E(),g?C(t,"hashchange",h):(y&&(c||x(),T()),f=setInterval(h,n)),l=!0,u.initialized.dispatch(w(a))},stop:function(){if(!l)return;g?k(t,"hashchange",h):(clearInterval(f),f=null),l=!1,u.stopped.dispatch(w(a))},isActive:function(){return l},getURL:function(){return i.href},getBaseURL:function(){return u.getURL().replace(d,"")},setHash:function(e){e=L.apply(null,arguments),e!==a&&(N(e),i.hash="#"+encodeURI(e))},replaceHash:function(e){e=L.apply(null,arguments),e!==a&&(N(e,!0),i.replace("#"+encodeURI(e)))},getHash:function(){return w(a)},getHashAsArray:function(){return u.getHash().split(u.separator)},dispose:function(){u.stop(),u.initialized.dispose(),u.stopped.dispose(),u.changed.dispose(),c=u=t.hasher=null},toString:function(){return'[hasher version="'+u.VERSION+'" hash="'+u.getHash()+'"]'}},u.initialized.memorize=!0,u}(window);return t})})(typeof define=="function"&&define.amd?define:function(e,t,n){window[e]=n(window[t[0]])})